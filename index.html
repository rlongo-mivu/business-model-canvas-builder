<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Model Canvas Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0f0f0f;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #888;
            font-size: 1.1rem;
        }

        .info-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #2d2d44;
            border: 1px solid #3d3d5c;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .info-button:hover {
            background: #3d3d5c;
            transform: scale(1.1);
        }

        .journey-container {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .journey-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            margin-bottom: 30px;
            text-align: center;
        }

        .section-header h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #fff;
        }

        .section-header .description {
            color: #aaa;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        .tips-box {
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            border: 1px solid #3d3d5c;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .tips-box h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .tips-box ul {
            list-style: none;
            padding-left: 0;
        }

        .tips-box li {
            padding: 8px 0;
            color: #ccc;
            position: relative;
            padding-left: 20px;
        }

        .tips-box li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .input-section {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .business-name-input {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .business-name-input h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            color: #ddd;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            background: #0f0f0f;
            border: 2px solid #3d3d5c;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .add-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .add-button:hover {
            transform: translateY(-2px);
        }

        .items-list {
            margin-top: 20px;
        }

        .item-block {
            background: #2d2d44;
            border: 1px solid #3d3d5c;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .item-block .text {
            flex: 1;
            color: #fff;
        }

        .item-block .remove {
            background: #ff4757;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .nav-button {
            background: #2d2d44;
            color: white;
            border: 1px solid #3d3d5c;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .nav-button:hover {
            background: #3d3d5c;
        }

        .nav-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
        }

        .nav-button.primary:hover {
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar {
            background: #1a1a2e;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.5s ease-out;
        }

        /* Context panels for visualization */
        .context-panels {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .context-panel {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #3d3d5c;
        }

        .context-panel h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .context-panel .context-item {
            background: #0f0f0f;
            border-left: 3px solid #667eea;
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 4px;
            color: #ddd;
            font-size: 0.9rem;
        }

        .center-input {
            background: #2d2d44;
            border: 2px solid #667eea;
        }

        /* Final Canvas Styles */
        .canvas-view {
            background: #1a1a2e;
            border-radius: 16px;
            padding: 30px;
            margin-top: 30px;
        }

        .canvas-title-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .canvas-title {
            font-size: 1.8rem;
            color: #fff;
            margin-bottom: 10px;
        }

        .edit-title-button {
            background: #2d2d44;
            color: white;
            border: 1px solid #3d3d5c;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .edit-title-button:hover {
            background: #3d3d5c;
        }

        .canvas-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 2fr 1fr 1fr;
            grid-template-rows: 1fr 1fr auto;
            gap: 15px;
            min-height: 600px;
        }

        .canvas-section {
            background: #0f0f0f;
            border: 2px solid;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .canvas-section-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .add-item-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .add-item-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .canvas-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid;
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .canvas-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .canvas-item.editing {
            background: rgba(255, 255, 255, 0.15);
        }

        .canvas-item-text {
            flex: 1;
            margin-right: 10px;
        }

        .delete-item-button {
            background: #ff4757;
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s;
        }

        .canvas-item:hover .delete-item-button {
            opacity: 1;
        }

        .delete-item-button:hover {
            transform: scale(1.1);
        }

        /* Color-coded sections */
        .key-partners { grid-column: 1; grid-row: 1 / 3; border-color: #38a169; }
        .key-activities { grid-column: 2; grid-row: 1; border-color: #38a169; }
        .key-resources { grid-column: 2; grid-row: 2; border-color: #38a169; }
        .value-prop { grid-column: 3; grid-row: 1 / 3; border-color: #ea580c; border-width: 3px; }
        .relationships { grid-column: 4; grid-row: 1; border-color: #2563eb; }
        .channels { grid-column: 4; grid-row: 2; border-color: #2563eb; }
        .customers { grid-column: 5; grid-row: 1 / 3; border-color: #2563eb; }
        .cost-structure { grid-column: 1 / 4; grid-row: 3; border-color: #7c3aed; }
        .revenue-streams { grid-column: 4 / 6; grid-row: 3; border-color: #7c3aed; }

        .key-partners .canvas-section-title,
        .key-activities .canvas-section-title,
        .key-resources .canvas-section-title { border-bottom-color: #38a169; }
        
        .value-prop .canvas-section-title { border-bottom-color: #ea580c; }
        
        .relationships .canvas-section-title,
        .channels .canvas-section-title,
        .customers .canvas-section-title { border-bottom-color: #2563eb; }
        
        .cost-structure .canvas-section-title,
        .revenue-streams .canvas-section-title { border-bottom-color: #7c3aed; }

        .key-partners .canvas-item,
        .key-activities .canvas-item,
        .key-resources .canvas-item { border-left-color: #38a169; }
        
        .value-prop .canvas-item { border-left-color: #ea580c; }
        
        .relationships .canvas-item,
        .channels .canvas-item,
        .customers .canvas-item { border-left-color: #2563eb; }
        
        .cost-structure .canvas-item,
        .revenue-streams .canvas-item { border-left-color: #7c3aed; }

        .export-section {
            margin-top: 30px;
            text-align: center;
        }

        .export-button {
            background: #2d2d44;
            color: white;
            border: 1px solid #3d3d5c;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
            transition: all 0.3s;
        }

        .export-button:hover {
            background: #3d3d5c;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a1a2e;
            border-radius: 16px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .import-section {
            margin-top: 20px;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: inline-block;
            background: #2d2d44;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-label:hover {
            background: #3d3d5c;
        }

        .start-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .start-option {
            background: #1a1a2e;
            border: 2px solid #3d3d5c;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-option:hover {
            border-color: #667eea;
            transform: translateY(-5px);
        }

        .start-option h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .start-option p {
            color: #aaa;
            font-size: 0.95rem;
        }

        .help-content h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .help-content p, .help-content li {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .help-content ul {
            padding-left: 20px;
        }

        @media (max-width: 1200px) {
            .canvas-grid {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto;
            }
            
            .canvas-section {
                grid-column: span 2 !important;
                grid-row: auto !important;
            }

            .context-panels {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>Business Model Canvas Builder</h1>
            <p>Build your Osterwalder Business Model Canvas step by step</p>
            <p>Project developed by Ryan Longo with the Assistance of Claude Opus 4</p>
            <button class="info-button" onclick="showHelpModal()" title="Help">‚Ñπ</button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar" style="width: 0%"></div>
        </div>

        <!-- Start Section -->
        <div id="journey-0" class="journey-container active">
            <div class="section-header">
                <h2>üëã Welcome to the Business Model Canvas Builder</h2>
                <p class="description">Let's start building your business model. Choose how you'd like to begin:</p>
            </div>

            <div class="business-name-input">
                <h3>First, what's your business or project name? (Optional)</h3>
                <div class="input-group">
                    <input type="text" id="business-name-input" placeholder="e.g., My Awesome Startup">
                </div>
            </div>

            <div class="start-options">
                <div class="start-option" onclick="startFresh()">
                    <h3>üöÄ Start Fresh</h3>
                    <p>Begin building your business model canvas from scratch with guided steps</p>
                </div>
                <div class="start-option" onclick="showImportModal()">
                    <h3>üìÅ Import Canvas</h3>
                    <p>Load a previously saved business model canvas from a JSON file</p>
                </div>
            </div>
        </div>

        <!-- Journey Sections -->
        <div id="journey-1" class="journey-container">
            <div class="section-header">
                <h2>üéØ Customer Segments</h2>
                <p class="description">Let's start by identifying who your customers are. These are the different groups of people or organizations your business aims to reach and serve.</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Customer Segments</h3>
                <ul>
                    <li>Think about different groups with distinct needs, behaviors, or attributes</li>
                    <li>Consider both direct users and decision-makers</li>
                    <li>Be specific - "everyone" is not a customer segment</li>
                    <li>Consider demographics, behaviors, and pain points</li>
                </ul>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <label for="customer-input">Add a customer segment:</label>
                    <input type="text" id="customer-input" placeholder="e.g., Small business owners, Students aged 18-25">
                </div>
                <button class="add-button" onclick="addItem('customers')">Add Customer Segment</button>
                <div class="items-list" id="customers-list"></div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Value Proposition</button>
            </div>
        </div>

        <div id="journey-2" class="journey-container">
            <div class="section-header">
                <h2>üíé Value Proposition</h2>
                <p class="description">Now, what value do you deliver to these customers? What problems are you solving or needs are you satisfying?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Value Proposition</h3>
                <ul>
                    <li>Focus on benefits, not features</li>
                    <li>Address specific customer pain points or gains</li>
                    <li>Think about what makes you unique</li>
                    <li>Consider functional, social, and emotional value</li>
                </ul>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <label for="value-input">Add a value proposition:</label>
                    <input type="text" id="value-input" placeholder="e.g., Save time with automated invoicing">
                </div>
                <button class="add-button" onclick="addItem('valueProp')">Add Value Proposition</button>
                <div class="items-list" id="valueProp-list"></div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Customer Relationships</button>
            </div>
        </div>

        <div id="journey-3" class="journey-container">
            <div class="section-header">
                <h2>ü§ù Customer Relationships</h2>
                <p class="description">How do you interact with your customers? What type of relationship does each customer segment expect?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Customer Relationships</h3>
                <ul>
                    <li>Consider the level of personal interaction (self-service, automated, personal)</li>
                    <li>Think about the customer journey stages</li>
                    <li>Balance cost with customer expectations</li>
                    <li>Consider retention strategies</li>
                </ul>
            </div>

            <div class="context-panels">
                <div class="context-panel">
                    <h4>üíé Your Value Propositions</h4>
                    <div id="context-valueProp-1"></div>
                </div>
                <div class="context-panel center-input">
                    <div class="input-group">
                        <label for="relationship-input">Add a relationship type:</label>
                        <input type="text" id="relationship-input" placeholder="e.g., Personal assistance, Self-service portal">
                    </div>
                    <button class="add-button" onclick="addItem('relationships')">Add Relationship Type</button>
                    <div class="items-list" id="relationships-list"></div>
                </div>
                <div class="context-panel">
                    <h4>üéØ Your Customer Segments</h4>
                    <div id="context-customers-1"></div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Channels</button>
            </div>
        </div>

        <div id="journey-4" class="journey-container">
            <div class="section-header">
                <h2>üì° Channels</h2>
                <p class="description">Through which channels do your customers want to be reached? How are you delivering your value proposition?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Channels</h3>
                <ul>
                    <li>Consider all customer touchpoints</li>
                    <li>Think about awareness, evaluation, purchase, delivery, and after-sales</li>
                    <li>Mix of direct and indirect channels</li>
                    <li>Online and offline presence</li>
                </ul>
            </div>

            <div class="context-panels">
                <div class="context-panel">
                    <h4>üíé Your Value Propositions</h4>
                    <div id="context-valueProp-2"></div>
                </div>
                <div class="context-panel center-input">
                    <div class="input-group">
                        <label for="channel-input">Add a channel:</label>
                        <input type="text" id="channel-input" placeholder="e.g., Website, Mobile app, Retail stores">
                    </div>
                    <button class="add-button" onclick="addItem('channels')">Add Channel</button>
                    <div class="items-list" id="channels-list"></div>
                </div>
                <div class="context-panel">
                    <h4>üéØ Your Customer Segments</h4>
                    <div id="context-customers-2"></div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Key Partners</button>
            </div>
        </div>

        <div id="journey-5" class="journey-container">
            <div class="section-header">
                <h2>ü§ù Key Partners</h2>
                <p class="description">Who are your key partners and suppliers? Which key resources do you acquire from partners?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Key Partners</h3>
                <ul>
                    <li>Strategic alliances with non-competitors</li>
                    <li>Partnerships with competitors (coopetition)</li>
                    <li>Joint ventures for new businesses</li>
                    <li>Buyer-supplier relationships</li>
                </ul>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <label for="partner-input">Add a key partner:</label>
                    <input type="text" id="partner-input" placeholder="e.g., Cloud providers, Payment processors">
                </div>
                <button class="add-button" onclick="addItem('keyPartners')">Add Key Partner</button>
                <div class="items-list" id="keyPartners-list"></div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Key Activities</button>
            </div>
        </div>

        <div id="journey-6" class="journey-container">
            <div class="section-header">
                <h2>‚ö° Key Activities</h2>
                <p class="description">What key activities does your value proposition require? What must you do well?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Key Activities</h3>
                <ul>
                    <li>Production activities (designing, making, delivering)</li>
                    <li>Problem-solving activities (consulting, service)</li>
                    <li>Platform/network activities (maintaining, promoting)</li>
                    <li>Consider what you must excel at</li>
                </ul>
            </div>

            <div class="context-panels">
                <div class="context-panel">
                    <h4>ü§ù Your Key Partners</h4>
                    <div id="context-keyPartners-1"></div>
                </div>
                <div class="context-panel center-input">
                    <div class="input-group">
                        <label for="activity-input">Add a key activity:</label>
                        <input type="text" id="activity-input" placeholder="e.g., Software development, Customer support">
                    </div>
                    <button class="add-button" onclick="addItem('keyActivities')">Add Key Activity</button>
                    <div class="items-list" id="keyActivities-list"></div>
                </div>
                <div class="context-panel">
                    <h4>üíé Your Value Propositions</h4>
                    <div id="context-valueProp-3"></div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Key Resources</button>
            </div>
        </div>

        <div id="journey-7" class="journey-container">
            <div class="section-header">
                <h2>üîß Key Resources</h2>
                <p class="description">What key resources does your value proposition require? These are the most important assets.</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Key Resources</h3>
                <ul>
                    <li>Physical resources (facilities, machines, systems)</li>
                    <li>Intellectual resources (brands, patents, data)</li>
                    <li>Human resources (expertise, skills)</li>
                    <li>Financial resources (cash, credit lines)</li>
                </ul>
            </div>

            <div class="context-panels">
                <div class="context-panel">
                    <h4>ü§ù Your Key Partners</h4>
                    <div id="context-keyPartners-2"></div>
                </div>
                <div class="context-panel center-input">
                    <div class="input-group">
                        <label for="resource-input">Add a key resource:</label>
                        <input type="text" id="resource-input" placeholder="e.g., Development team, Patent portfolio">
                    </div>
                    <button class="add-button" onclick="addItem('keyResources')">Add Key Resource</button>
                    <div class="items-list" id="keyResources-list"></div>
                </div>
                <div class="context-panel">
                    <h4>üíé Your Value Propositions</h4>
                    <div id="context-valueProp-4"></div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Cost Structure</button>
            </div>
        </div>

        <div id="journey-8" class="journey-container">
            <div class="section-header">
                <h2>üí∞ Cost Structure</h2>
                <p class="description">What are the most important costs in your business model? Which resources and activities are most expensive?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Cost Structure</h3>
                <ul>
                    <li>Fixed costs (salaries, rent, utilities)</li>
                    <li>Variable costs (materials, commissions)</li>
                    <li>Economies of scale and scope</li>
                    <li>Consider cost-driven vs value-driven approach</li>
                </ul>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <label for="cost-input">Add a cost element:</label>
                    <input type="text" id="cost-input" placeholder="e.g., Staff salaries, Cloud hosting">
                </div>
                <button class="add-button" onclick="addItem('costStructure')">Add Cost Element</button>
                <div class="items-list" id="costStructure-list"></div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="nextSection()">Next: Revenue Streams</button>
            </div>
        </div>

        <div id="journey-9" class="journey-container">
            <div class="section-header">
                <h2>üí∏ Revenue Streams</h2>
                <p class="description">For what value are your customers willing to pay? How would they prefer to pay?</p>
            </div>

            <div class="tips-box">
                <h3>üí° Tips for Revenue Streams</h3>
                <ul>
                    <li>Asset sale, usage fee, subscription fees</li>
                    <li>Licensing, brokerage fees, advertising</li>
                    <li>Consider pricing mechanisms</li>
                    <li>Think about customer payment preferences</li>
                </ul>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <label for="revenue-input">Add a revenue stream:</label>
                    <input type="text" id="revenue-input" placeholder="e.g., Monthly subscriptions, Transaction fees">
                </div>
                <button class="add-button" onclick="addItem('revenueStreams')">Add Revenue Stream</button>
                <div class="items-list" id="revenueStreams-list"></div>
            </div>

            <div class="navigation">
                <button class="nav-button" onclick="previousSection()">Previous</button>
                <button class="nav-button primary" onclick="finishCanvas()">Complete Canvas</button>
            </div>
        </div>

        <div id="journey-10" class="journey-container">
            <div class="section-header">
                <h2>üéâ Your Business Model Canvas</h2>
                <p class="description">Congratulations! Here's your complete Business Model Canvas. Click on any item to edit it, or use the + button to add new items.</p>
            </div>

            <div class="canvas-view">
                <div class="canvas-title-section">
                    <h2 class="canvas-title" id="canvasTitle">Business Model Canvas</h2>
                    <button class="edit-title-button" onclick="editCanvasTitle()">Edit Title</button>
                </div>
                <div class="canvas-grid" id="finalCanvas">
                    <div class="canvas-section key-partners">
                        <div class="canvas-section-title">
                            Key Partners
                            <button class="add-item-button" onclick="addCanvasItem('keyPartners')" title="Add item">+</button>
                        </div>
                        <div id="canvas-keyPartners"></div>
                    </div>
                    <div class="canvas-section key-activities">
                        <div class="canvas-section-title">
                            Key Activities
                            <button class="add-item-button" onclick="addCanvasItem('keyActivities')" title="Add item">+</button>
                        </div>
                        <div id="canvas-keyActivities"></div>
                    </div>
                    <div class="canvas-section key-resources">
                        <div class="canvas-section-title">
                            Key Resources
                            <button class="add-item-button" onclick="addCanvasItem('keyResources')" title="Add item">+</button>
                        </div>
                        <div id="canvas-keyResources"></div>
                    </div>
                    <div class="canvas-section value-prop">
                        <div class="canvas-section-title">
                            Value Propositions
                            <button class="add-item-button" onclick="addCanvasItem('valueProp')" title="Add item">+</button>
                        </div>
                        <div id="canvas-valueProp"></div>
                    </div>
                    <div class="canvas-section relationships">
                        <div class="canvas-section-title">
                            Customer Relationships
                            <button class="add-item-button" onclick="addCanvasItem('relationships')" title="Add item">+</button>
                        </div>
                        <div id="canvas-relationships"></div>
                    </div>
                    <div class="canvas-section channels">
                        <div class="canvas-section-title">
                            Channels
                            <button class="add-item-button" onclick="addCanvasItem('channels')" title="Add item">+</button>
                        </div>
                        <div id="canvas-channels"></div>
                    </div>
                    <div class="canvas-section customers">
                        <div class="canvas-section-title">
                            Customer Segments
                            <button class="add-item-button" onclick="addCanvasItem('customers')" title="Add item">+</button>
                        </div>
                        <div id="canvas-customers"></div>
                    </div>
                    <div class="canvas-section cost-structure">
                        <div class="canvas-section-title">
                            Cost Structure
                            <button class="add-item-button" onclick="addCanvasItem('costStructure')" title="Add item">+</button>
                        </div>
                        <div id="canvas-costStructure"></div>
                    </div>
                    <div class="canvas-section revenue-streams">
                        <div class="canvas-section-title">
                            Revenue Streams
                            <button class="add-item-button" onclick="addCanvasItem('revenueStreams')" title="Add item">+</button>
                        </div>
                        <div id="canvas-revenueStreams"></div>
                    </div>
                </div>
            </div>

            <div class="export-section">
                <button class="export-button" onclick="exportCanvas('png')">Export as PNG</button>
                <button class="export-button" onclick="exportCanvas('svg')">Export as SVG</button>
                <button class="export-button" onclick="exportCanvas('jpg')">Export as JPG</button>
                <button class="export-button" onclick="exportCanvas('json')">Export as JSON</button>
                <button class="export-button" onclick="showImportModal()">Import JSON</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeImportModal()">√ó</button>
            <h3>Import Business Model Canvas</h3>
            <div class="import-section">
                <p>Select a JSON file exported from this tool:</p>
                <input type="file" id="fileInput" class="file-input" accept=".json" onchange="handleFileImport(event)">
                <label for="fileInput" class="file-label">Choose File</label>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeHelpModal()">√ó</button>
            <h2>How to Use the Business Model Canvas Builder</h2>
            <div class="help-content">
                <h3>üöÄ Getting Started</h3>
                <p>This tool helps you create a Business Model Canvas step by step. You can either start fresh or import a previously saved canvas.</p>
                
                <h3>üìã The Journey</h3>
                <p>You'll be guided through 9 key sections:</p>
                <ul>
                    <li><strong>Customer Segments:</strong> Who are your customers?</li>
                    <li><strong>Value Propositions:</strong> What value do you provide?</li>
                    <li><strong>Customer Relationships:</strong> How do you interact with customers?</li>
                    <li><strong>Channels:</strong> How do you reach your customers?</li>
                    <li><strong>Key Partners:</strong> Who helps you deliver value?</li>
                    <li><strong>Key Activities:</strong> What must you do well?</li>
                    <li><strong>Key Resources:</strong> What assets do you need?</li>
                    <li><strong>Cost Structure:</strong> What are your main costs?</li>
                    <li><strong>Revenue Streams:</strong> How do you make money?</li>
                </ul>
                
                <h3>üí° Tips</h3>
                <ul>
                    <li>Be specific and concise with your entries</li>
                    <li>Use the context panels to see relationships between sections</li>
                    <li>You can add multiple items for each section</li>
                    <li>Press Enter to quickly add items</li>
                </ul>
                
                <h3>‚úèÔ∏è Editing Your Canvas</h3>
                <p>In the final canvas view:</p>
                <ul>
                    <li>Click any item to edit it</li>
                    <li>Use the + button to add new items</li>
                    <li>Hover and click the √ó to delete items</li>
                    <li>Edit the canvas title by clicking "Edit Title"</li>
                </ul>
                
                <h3>üíæ Saving Your Work</h3>
                <p>Export your canvas as:</p>
                <ul>
                    <li><strong>PNG/JPG:</strong> For presentations and sharing</li>
                    <li><strong>SVG:</strong> For scalable graphics</li>
                    <li><strong>JSON:</strong> To save and continue editing later</li>
                </ul>
                
                <h3>üé® Color Coding</h3>
                <p>The canvas uses Osterwalder's color system:</p>
                <ul>
                    <li>üü¢ Green: Efficiency (Partners, Activities, Resources)</li>
                    <li>üü† Orange: Value Creation (Value Propositions)</li>
                    <li>üîµ Blue: Customer Experience (Segments, Relationships, Channels)</li>
                    <li>üü£ Purple: Financial (Costs, Revenue)</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        let currentSection = 0;
        const totalSections = 10;
        let businessName = '';
        const canvasData = {
            customers: [],
            valueProp: [],
            relationships: [],
            channels: [],
            keyPartners: [],
            keyActivities: [],
            keyResources: [],
            costStructure: [],
            revenueStreams: []
        };

        function updateProgress() {
            const progress = (currentSection / totalSections) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function showSection(sectionNumber) {
            document.querySelectorAll('.journey-container').forEach(container => {
                container.classList.remove('active');
            });
            document.getElementById(`journey-${sectionNumber}`).classList.add('active');
            updateProgress();
            
            // Update context panels when showing relevant sections
            if (sectionNumber === 3 || sectionNumber === 4) {
                updateContextPanels(['valueProp', 'customers']);
            } else if (sectionNumber === 6 || sectionNumber === 7) {
                updateContextPanels(['keyPartners', 'valueProp']);
            }
        }

        function updateContextPanels(types) {
            types.forEach(type => {
                for (let i = 1; i <= 4; i++) {
                    const contextElement = document.getElementById(`context-${type}-${i}`);
                    if (contextElement) {
                        contextElement.innerHTML = '';
                        canvasData[type].forEach(item => {
                            const itemElement = document.createElement('div');
                            itemElement.className = 'context-item';
                            itemElement.textContent = item;
                            contextElement.appendChild(itemElement);
                        });
                    }
                }
            });
        }

        function startFresh() {
            const nameInput = document.getElementById('business-name-input');
            businessName = nameInput.value.trim() || 'Business Model Canvas';
            currentSection = 1;
            showSection(1);
        }

        function nextSection() {
            if (currentSection < totalSections) {
                currentSection++;
                showSection(currentSection);
            }
        }

        function previousSection() {
            if (currentSection > 0) {
                currentSection--;
                showSection(currentSection);
            }
        }

        function addItem(category) {
            const inputId = category === 'valueProp' ? 'value-input' : 
                           category === 'keyPartners' ? 'partner-input' :
                           category === 'keyActivities' ? 'activity-input' :
                           category === 'keyResources' ? 'resource-input' :
                           category === 'costStructure' ? 'cost-input' :
                           category === 'revenueStreams' ? 'revenue-input' :
                           category === 'relationships' ? 'relationship-input' :
                           category === 'channels' ? 'channel-input' :
                           'customer-input';
            
            const input = document.getElementById(inputId);
            const value = input.value.trim();
            
            if (value) {
                canvasData[category].push(value);
                input.value = '';
                renderList(category);
                updateContextPanels([category]);
            }
        }

        function removeItem(category, index) {
            canvasData[category].splice(index, 1);
            renderList(category);
            updateContextPanels([category]);
        }

        function renderList(category) {
            const listElement = document.getElementById(`${category}-list`);
            if (listElement) {
                listElement.innerHTML = '';
                
                canvasData[category].forEach((item, index) => {
                    const itemBlock = document.createElement('div');
                    itemBlock.className = 'item-block';
                    itemBlock.innerHTML = `
                        <span class="text">${item}</span>
                        <button class="remove" onclick="removeItem('${category}', ${index})">Remove</button>
                    `;
                    listElement.appendChild(itemBlock);
                });
            }
        }

        function finishCanvas() {
            currentSection = 10;
            showSection(10);
            updateCanvasTitle();
            renderFinalCanvas();
        }

        function updateCanvasTitle() {
            const titleElement = document.getElementById('canvasTitle');
            titleElement.textContent = businessName || 'Business Model Canvas';
        }

        function editCanvasTitle() {
            const currentTitle = document.getElementById('canvasTitle').textContent;
            const newTitle = prompt('Enter canvas title:', currentTitle);
            if (newTitle !== null && newTitle.trim() !== '') {
                businessName = newTitle.trim();
                updateCanvasTitle();
            }
        }

        function renderFinalCanvas() {
            Object.keys(canvasData).forEach(category => {
                const container = document.getElementById(`canvas-${category}`);
                container.innerHTML = '';
                
                canvasData[category].forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'canvas-item';
                    itemElement.innerHTML = `
                        <span class="canvas-item-text">${item}</span>
                        <button class="delete-item-button" onclick="deleteCanvasItem('${category}', ${index})" title="Delete">√ó</button>
                    `;
                    itemElement.onclick = (e) => {
                        if (!e.target.classList.contains('delete-item-button')) {
                            editCanvasItem(category, index);
                        }
                    };
                    container.appendChild(itemElement);
                });
            });
        }

        function editCanvasItem(category, index) {
            const newValue = prompt('Edit item:', canvasData[category][index]);
            if (newValue !== null && newValue.trim() !== '') {
                canvasData[category][index] = newValue.trim();
                renderFinalCanvas();
            }
        }

        function deleteCanvasItem(category, index) {
            if (confirm('Delete this item?')) {
                canvasData[category].splice(index, 1);
                renderFinalCanvas();
            }
        }

        function addCanvasItem(category) {
            const newValue = prompt('Add new item:');
            if (newValue !== null && newValue.trim() !== '') {
                canvasData[category].push(newValue.trim());
                renderFinalCanvas();
            }
        }

        async function exportCanvas(format) {
            const canvas = document.getElementById('finalCanvas');
            
            if (format === 'json') {
                const exportData = {
                    businessName: businessName,
                    canvasData: canvasData,
                    exportDate: new Date().toISOString()
                };
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${businessName.replace(/[^a-z0-9]/gi, '-').toLowerCase()}-${Date.now()}.json`;
                link.click();
                URL.revokeObjectURL(url);
                return;
            }
            
            // Include title in image exports
            const titleSection = document.querySelector('.canvas-title-section');
            const originalDisplay = titleSection.style.display;
            titleSection.style.display = 'block';
            
            const canvasElement = await html2canvas(document.querySelector('.canvas-view'), {
                backgroundColor: '#1a1a2e',
                scale: 2
            });
            
            titleSection.style.display = originalDisplay;
            
            if (format === 'png' || format === 'jpg') {
                canvasElement.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `${businessName.replace(/[^a-z0-9]/gi, '-').toLowerCase()}-${Date.now()}.${format}`;
                    link.click();
                    URL.revokeObjectURL(url);
                }, format === 'png' ? 'image/png' : 'image/jpeg');
            } else if (format === 'svg') {
                const svgContent = createSVGFromCanvas();
                const blob = new Blob([svgContent], {type: 'image/svg+xml'});
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${businessName.replace(/[^a-z0-9]/gi, '-').toLowerCase()}-${Date.now()}.svg`;
                link.click();
                URL.revokeObjectURL(url);
            }
        }

        function createSVGFromCanvas() {
            const title = businessName || 'Business Model Canvas';
            let svg = `<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
                <rect width="1200" height="800" fill="#1a1a2e"/>
                <text x="600" y="40" text-anchor="middle" fill="white" font-size="28" font-weight="bold">${title}</text>`;
            
            const sections = [
                {name: 'Key Partners', x: 50, y: 100, data: canvasData.keyPartners, color: '#38a169'},
                {name: 'Key Activities', x: 250, y: 100, data: canvasData.keyActivities, color: '#38a169'},
                {name: 'Key Resources', x: 250, y: 250, data: canvasData.keyResources, color: '#38a169'},
                {name: 'Value Propositions', x: 450, y: 100, data: canvasData.valueProp, color: '#ea580c'},
                {name: 'Customer Relationships', x: 750, y: 100, data: canvasData.relationships, color: '#2563eb'},
                {name: 'Channels', x: 750, y: 250, data: canvasData.channels, color: '#2563eb'},
                {name: 'Customer Segments', x: 950, y: 100, data: canvasData.customers, color: '#2563eb'},
                {name: 'Cost Structure', x: 50, y: 450, data: canvasData.costStructure, color: '#7c3aed'},
                {name: 'Revenue Streams', x: 600, y: 450, data: canvasData.revenueStreams, color: '#7c3aed'}
            ];
            
            sections.forEach(section => {
                // Section box
                svg += `<rect x="${section.x - 10}" y="${section.y - 30}" width="180" height="${100 + section.data.length * 25}" fill="#0f0f0f" stroke="${section.color}" stroke-width="2" rx="8"/>`;
                // Section title
                svg += `<text x="${section.x}" y="${section.y}" fill="${section.color}" font-size="16" font-weight="bold">${section.name}</text>`;
                // Section items
                section.data.forEach((item, index) => {
                    svg += `<text x="${section.x}" y="${section.y + 25 + (index * 20)}" fill="#ddd" font-size="14">${item}</text>`;
                });
            });
            
            svg += '</svg>';
            return svg;
        }

        function showImportModal() {
            document.getElementById('importModal').classList.add('active');
        }

        function closeImportModal() {
            document.getElementById('importModal').classList.remove('active');
            document.getElementById('fileInput').value = '';
        }

        function showHelpModal() {
            document.getElementById('helpModal').classList.add('active');
        }

        function closeHelpModal() {
            document.getElementById('helpModal').classList.remove('active');
        }

        function handleFileImport(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        // Handle both old and new format
                        if (importedData.canvasData) {
                            // New format with businessName
                            businessName = importedData.businessName || 'Business Model Canvas';
                            Object.keys(importedData.canvasData).forEach(key => {
                                if (canvasData.hasOwnProperty(key)) {
                                    canvasData[key] = importedData.canvasData[key];
                                }
                            });
                        } else {
                            // Old format - direct canvas data
                            const requiredKeys = Object.keys(canvasData);
                            const isValid = requiredKeys.every(key => 
                                Array.isArray(importedData[key])
                            );
                            
                            if (isValid) {
                                Object.keys(importedData).forEach(key => {
                                    if (canvasData.hasOwnProperty(key)) {
                                        canvasData[key] = importedData[key];
                                    }
                                });
                            } else {
                                throw new Error('Invalid format');
                            }
                        }
                        
                        // Go to final canvas
                        currentSection = 10;
                        showSection(10);
                        updateCanvasTitle();
                        renderFinalCanvas();
                        closeImportModal();
                        
                        alert('Canvas imported successfully!');
                    } catch (error) {
                        alert('Error reading file. Please ensure it\'s a valid Business Model Canvas JSON file.');
                    }
                };
                reader.readAsText(file);
            }
        }

        // Handle Enter key for adding items
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && input.id !== 'business-name-input') {
                        const category = input.id.replace('-input', '');
                        const categoryMap = {
                            'customer': 'customers',
                            'value': 'valueProp',
                            'relationship': 'relationships',
                            'channel': 'channels',
                            'partner': 'keyPartners',
                            'activity': 'keyActivities',
                            'resource': 'keyResources',
                            'cost': 'costStructure',
                            'revenue': 'revenueStreams'
                        };
                        if (categoryMap[category]) {
                            addItem(categoryMap[category]);
                        }
                    }
                });
            });
            
            // Handle business name enter key
            document.getElementById('business-name-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startFresh();
                }
            });
        });

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>
